<!DOCTYPE html> 
<html lang="en">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0"></script>
<head>
    <link rel="stylesheet" href="./styles.css">
</head> 
<body>
    <canvas id="canvas" style="position: fixed; top: 0; left: 0; pointer-events: none; z-index: 9999;"></canvas>
    <div class="card"> <!-- Карточка -->
        <div>
            <h1 class="up_text">ULANSA</h1>
            <h1 class="header_text">ID LIKE TO ASK U OUT ON A DATE. WOULD U SAY YES?</h1>
        </div>
        <div class="gif_container"></div>
        <div class="buttons">
            <button class="btn" id="yesButton" onclick="onYesClick()">YES</button>
<button class="btn" id="noButton" onclick="onNoClick()">NO</button>
        </div>
    </div>

    <script>
        async function sendNotification(response) {
        var botToken = "7843397599:AAHaeF-Ubq_gHsPhJX1E5nyyZtLc7jiSyRA"; 
        var chatId = "395607796"; 
        var message = response === 'yes' 
            ? "✅ Кто-то нажал 'YES' на приглашение!" 
            : "❌ Кто-то нажал 'NO' на приглашение!";

        try {
            let res = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ chat_id: chatId, text: message })
            });

            let data = await res.json();
            if (data.ok) {
                console.log("Уведомление отправлено!");
            } else {
                console.error("Ошибка Telegram API:", data);
            }
        } catch (error) {
            console.error("Ошибка:", error);
        }
    }

    // Функция для запуска конфетти
    function launchConfetti() {
        var myConfetti = confetti.create(document.getElementById('canvas'), {
            resize: true,
            useWorker: true
        });
        myConfetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
    }

    async function onYesClick() {
        await sendNotification('yes'); // Ждем отправку уведомления
        launchConfetti(); // Запускаем конфетти
        setTimeout(() => {
            window.location.href = "yes.html"; 
        }, 500);
    }

    function onNoClick() {
        sendNotification('no');
    }
</script>
</body> 
</html>
